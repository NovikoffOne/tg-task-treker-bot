# Todo List Feature - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

> **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-01-29  
> **–í–µ—Ä—Å–∏—è:** 1.0  
> **–°—Ç–∞—Ç—É—Å:** üìù –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞](#–æ–ø–∏—Å–∞–Ω–∏–µ-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞)
2. [–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏](#–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ-—Å—Ü–µ–Ω–∞—Ä–∏–∏)
3. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
4. [–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#—Å—Ö–µ–º–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
5. [API –∏ –º–µ—Ç–æ–¥—ã](#api-–∏-–º–µ—Ç–æ–¥—ã)
6. [–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö](#–º–æ–¥–µ–ª–∏-–¥–∞–Ω–Ω—ã—Ö)
7. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-—Å–∏—Å—Ç–µ–º–æ–π)
8. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

---

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

Todo List - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏—á–Ω—ã–º–∏ –∏ —Ä–∞–±–æ—á–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–º –≤–∏–¥–æ–º, –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π Google Calendar –∏ Task Tracker. –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

1. **–ü–∞–∫–µ—Ç–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á** —á–µ—Ä–µ–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ç–∏–ø–∞ (–ª–∏—á–Ω—ã–µ/—Ä–∞–±–æ—á–∏–µ)
2. **–ö–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –≤–∏–¥** –∑–∞–¥–∞—á —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –¥–∞—Ç–∞–º –∏ –≤—Ä–µ–º–µ–Ω–∏
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞–¥–∞—á:**
   - –õ–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–±–µ–∑ project_id) ‚Üí —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `personal_tasks`
   - –†–∞–±–æ—á–∏–µ –∑–∞–¥–∞—á–∏ (—Å project_id –≤ —Ñ–æ—Ä–º–∞—Ç–µ "5001", "5010" –∏ —Ç.–¥.) ‚Üí –ø—Ä–∏–∫—Ä–µ–ø–ª—è—é—Ç—Å—è –∫ –ø—Ä–æ–µ–∫—Ç—É
4. **–ü–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç –∏ –≤—Ä–µ–º–µ–Ω–∏** –∏–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ ("–∑–∞–≤—Ç—Ä–∞", "03.12", "10:00", "11:10 - 12:00")
5. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–¥–∞—á –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É** —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

## üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–∞–∫–µ—Ç–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á –Ω–∞ –∑–∞–≤—Ç—Ä–∞

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –±–æ—Ç—É:**
```
–î–æ–±–∞–≤—å –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –∑–∞–¥–∞—á–∏

1. –í—ã–≥—É–ª –§–µ—Ä—ã –≤ 10:00 –∏ 19:00
2. –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –∫ –±–∞—Ä–±–µ—Ä—É 11:00
3. –î–æ–¥–µ–ª–∞—Ç—å –±–æ—Ç–∞ 11:10 - 12:00
4. 5001 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Å—Ç–æ—Ä–µ
5. 5010 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Å—Ç–æ—Ä–µ
6. 5007 - –ü—Ä–æ–º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫—É 03.12
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ê–≥–µ–Ω—Ç—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —Ç–∏–ø –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏
- –õ–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ (1-3) –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ `personal_tasks` –Ω–∞ –∑–∞–≤—Ç—Ä–∞
- –†–∞–±–æ—á–∏–µ –∑–∞–¥–∞—á–∏ (4-5) –ø—Ä–∏–∫—Ä–µ–ø–ª—è—é—Ç—Å—è –∫ –ø—Ä–æ–µ–∫—Ç–∞–º 5001 –∏ 5010
- –ó–∞–¥–∞—á–∞ 6 –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –¥–∞—Ç—É 03.12 (–Ω–µ –Ω–∞ –∑–∞–≤—Ç—Ä–∞)

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç—É–¥—É-–ª–∏—Å—Ç–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "üìÖ –¢—É–¥—É-–ª–∏—Å—Ç" –∏–ª–∏ –ø–∏—à–µ—Ç `/todo`**

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üìÖ –¢—É–¥—É-–ª–∏—Å—Ç –Ω–∞ 29.11.2025

‚è∞ 10:00
  ‚òê –í—ã–≥—É–ª –§–µ—Ä—ã

‚è∞ 11:00
  ‚òê –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –∫ –±–∞—Ä–±–µ—Ä—É

‚è∞ 11:10 - 12:00
  ‚òê –î–æ–¥–µ–ª–∞—Ç—å –±–æ—Ç–∞

üìä –†–∞–±–æ—á–∏–µ –∑–∞–¥–∞—á–∏:
  ‚òê 5001 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Å—Ç–æ—Ä–µ
  ‚òê 5010 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Å—Ç–æ—Ä–µ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç:**
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –¥–∞—Ç–∞–º–∏ (–≤—á–µ—Ä–∞, —Å–µ–≥–æ–¥–Ω—è, –∑–∞–≤—Ç—Ä–∞)
- –í—ã–±–∏—Ä–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É —á–µ—Ä–µ–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä—å
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ –Ω–∞ –Ω–µ–¥–µ–ª—é –≤–ø–µ—Ä–µ–¥

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **–ü–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç:**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤: "—Å–µ–≥–æ–¥–Ω—è", "–∑–∞–≤—Ç—Ä–∞", "DD.MM", "DD.MM.YYYY"
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã

2. **–ü–∞—Ä—Å–∏–Ω–≥ –≤—Ä–µ–º–µ–Ω–∏:**
   - –§–æ—Ä–º–∞—Ç: "HH:MM" (–Ω–∞–ø—Ä–∏–º–µ—Ä, "10:00")
   - –î–∏–∞–ø–∞–∑–æ–Ω –≤—Ä–µ–º–µ–Ω–∏: "HH:MM - HH:MM" (–Ω–∞–ø—Ä–∏–º–µ—Ä, "11:10 - 12:00")
   - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è: "10:00 –∏ 19:00"

3. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞–¥–∞—á:**
   - –ü–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è project_id: "5001 - —Ç–µ–∫—Å—Ç" –∏–ª–∏ "5001 —Ç–µ–∫—Å—Ç" –∏–ª–∏ "5001: —Ç–µ–∫—Å—Ç"
   - –ï—Å–ª–∏ project_id –Ω–∞–π–¥–µ–Ω –∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î ‚Üí —Ä–∞–±–æ—á–∞—è –∑–∞–¥–∞—á–∞
   - –ò–Ω–∞—á–µ ‚Üí –ª–∏—á–Ω–∞—è –∑–∞–¥–∞—á–∞

4. **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
   - –õ–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ ‚Üí —Ç–∞–±–ª–∏—Ü–∞ `personal_tasks`
   - –†–∞–±–æ—á–∏–µ –∑–∞–¥–∞—á–∏ ‚Üí —Ç–∞–±–ª–∏—Ü–∞ `tasks` —Å `project_id` –∏ `scheduled_date`

### –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ `scheduled_date` –∏ `deadline` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞—Ç

2. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:**
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞
   - –û—Ç–∫–∞—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î

---

## üóÑÔ∏è –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞: personal_tasks

```sql
CREATE TABLE personal_tasks (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    title TEXT NOT NULL,
    description TEXT,
    scheduled_date DATE NOT NULL,  -- –î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    scheduled_time TIME,  -- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    scheduled_time_end TIME,  -- –ö–æ–Ω–µ—Ü –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    deadline DATETIME,  -- –î–µ–¥–ª–∞–π–Ω (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)
    completed BOOLEAN DEFAULT 0,
    completed_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_personal_tasks_user_date ON personal_tasks(user_id, scheduled_date);
CREATE INDEX idx_personal_tasks_deadline ON personal_tasks(deadline);
CREATE INDEX idx_personal_tasks_completed ON personal_tasks(user_id, completed);
```

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã: tasks

–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ç–∞–±–ª–∏—Ü—É `tasks`:

```sql
ALTER TABLE tasks ADD COLUMN scheduled_date DATE;
ALTER TABLE tasks ADD COLUMN scheduled_time TIME;
ALTER TABLE tasks ADD COLUMN scheduled_time_end TIME;

CREATE INDEX idx_tasks_scheduled_date ON tasks(scheduled_date);
CREATE INDEX idx_tasks_project_scheduled ON tasks(project_id, scheduled_date);
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–æ–ª—è `deadline`, `started_at`, `completed_at` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ `tasks`.

---

## üì° API –∏ –º–µ—Ç–æ–¥—ã

### TodoService

**–§–∞–π–ª:** `task_tracker_bot/services/todo_service.py`

```python
class TodoService:
    def __init__(self, personal_task_repo, task_repo, project_repo, date_parser, task_classifier):
        self.personal_task_repo = personal_task_repo
        self.task_repo = task_repo
        self.project_repo = project_repo
        self.date_parser = date_parser
        self.task_classifier = task_classifier
    
    def create_todo_batch(
        self,
        tasks_text: str,
        workspace_id: int,
        user_id: int,
        default_date: Optional[datetime] = None
    ) -> Dict[str, Any]:
        """
        –°–æ–∑–¥–∞–µ—Ç –ø–∞–∫–µ—Ç –∑–∞–¥–∞—á –∏–∑ —Ç–µ–∫—Å—Ç–∞
        
        Args:
            tasks_text: –¢–µ–∫—Å—Ç —Å –∑–∞–¥–∞—á–∞–º–∏ (–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫)
            workspace_id: ID –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
            user_id: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            default_date: –î–∞—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ –≤ –∑–∞–¥–∞—á–µ)
        
        Returns:
            {
                "status": "success",
                "personal_tasks_created": [...],
                "work_tasks_created": [...],
                "errors": [...]
            }
        """
    
    def get_todo_list(
        self,
        user_id: int,
        date: datetime,
        include_work_tasks: bool = True
    ) -> Dict[str, Any]:
        """
        –ü–æ–ª—É—á–∞–µ—Ç —Ç—É–¥—É-–ª–∏—Å—Ç –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É
        
        Args:
            user_id: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            date: –î–∞—Ç–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            include_work_tasks: –í–∫–ª—é—á–∞—Ç—å –ª–∏ —Ä–∞–±–æ—á–∏–µ –∑–∞–¥–∞—á–∏
        
        Returns:
            {
                "date": "29.11.2025",
                "personal_tasks": [...],
                "work_tasks": [...],
                "grouped_by_time": {...}
            }
        """
    
    def mark_personal_task_completed(
        self,
        task_id: int,
        user_id: int
    ) -> tuple[bool, Optional[str]]:
        """–û—Ç–º–µ—Ç–∏—Ç—å –ª–∏—á–Ω—É—é –∑–∞–¥–∞—á—É –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é"""
```

### DateParser

**–§–∞–π–ª:** `task_tracker_bot/utils/date_parser.py`

```python
class DateParser:
    def parse_date(self, text: str, reference_date: Optional[datetime] = None) -> Optional[datetime]:
        """
        –ü–∞—Ä—Å–∏—Ç –¥–∞—Ç—É –∏–∑ —Ç–µ–∫—Å—Ç–∞
        
        –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:
        - "—Å–µ–≥–æ–¥–Ω—è" ‚Üí —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞
        - "–∑–∞–≤—Ç—Ä–∞" ‚Üí —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞ + 1 –¥–µ–Ω—å
        - "DD.MM" ‚Üí –¥–∞—Ç–∞ –≤ —Ç–µ–∫—É—â–µ–º –≥–æ–¥—É
        - "DD.MM.YYYY" ‚Üí –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –¥–∞—Ç–∞
        
        Returns:
            datetime –æ–±—ä–µ–∫—Ç –∏–ª–∏ None –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å
        """
    
    def parse_time(self, text: str) -> Optional[time]:
        """
        –ü–∞—Ä—Å–∏—Ç –≤—Ä–µ–º—è –∏–∑ —Ç–µ–∫—Å—Ç–∞
        
        –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:
        - "HH:MM" ‚Üí –æ–¥–Ω–æ –≤—Ä–µ–º—è
        - "HH:MM - HH:MM" ‚Üí –¥–∏–∞–ø–∞–∑–æ–Ω –≤—Ä–µ–º–µ–Ω–∏
        
        Returns:
            time –æ–±—ä–µ–∫—Ç –∏–ª–∏ None
        """
    
    def parse_time_range(self, text: str) -> Optional[Tuple[time, time]]:
        """
        –ü–∞—Ä—Å–∏—Ç –¥–∏–∞–ø–∞–∑–æ–Ω –≤—Ä–µ–º–µ–Ω–∏
        
        Returns:
            –ö–æ—Ä—Ç–µ–∂ (start_time, end_time) –∏–ª–∏ None
        """
    
    def parse_datetime_from_task(self, task_text: str, default_date: Optional[datetime] = None) -> Dict[str, Any]:
        """
        –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è –∏–∑ —Ç–µ–∫—Å—Ç–∞ –∑–∞–¥–∞—á–∏
        
        Returns:
            {
                "date": datetime,
                "time": time,
                "time_end": time,
                "remaining_text": str  # –¢–µ–∫—Å—Ç –±–µ–∑ –¥–∞—Ç—ã/–≤—Ä–µ–º–µ–Ω–∏
            }
        """
```

### TaskClassifier

**–§–∞–π–ª:** `task_tracker_bot/utils/task_classifier.py`

```python
class TaskClassifier:
    def __init__(self, project_repo):
        self.project_repo = project_repo
    
    def classify_task(
        self,
        task_text: str,
        workspace_id: int
    ) -> Dict[str, Any]:
        """
        –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –∑–∞–¥–∞—á–∏ –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç project_id –µ—Å–ª–∏ –µ—Å—Ç—å
        
        Args:
            task_text: –¢–µ–∫—Å—Ç –∑–∞–¥–∞—á–∏
            workspace_id: ID –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
        
        Returns:
            {
                "type": "personal" | "work",
                "project_id": str | None,
                "title": str,  # –û—á–∏—â–µ–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–¥–∞—á–∏
                "description": str | None
            }
        """
```

### PersonalTaskRepository

**–§–∞–π–ª:** `task_tracker_bot/repositories/personal_task_repository.py`

```python
class PersonalTaskRepository:
    def create(
        self,
        user_id: int,
        title: str,
        scheduled_date: date,
        scheduled_time: Optional[time] = None,
        scheduled_time_end: Optional[time] = None,
        deadline: Optional[datetime] = None,
        description: Optional[str] = None
    ) -> int:
        """–°–æ–∑–¥–∞—Ç—å –ª–∏—á–Ω—É—é –∑–∞–¥–∞—á—É"""
    
    def get_by_date(
        self,
        user_id: int,
        target_date: date
    ) -> List[PersonalTask]:
        """–ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á–∏ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É"""
    
    def get_by_date_range(
        self,
        user_id: int,
        start_date: date,
        end_date: date
    ) -> List[PersonalTask]:
        """–ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á–∏ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –¥–∞—Ç"""
    
    def mark_completed(
        self,
        task_id: int,
        user_id: int
    ) -> bool:
        """–û—Ç–º–µ—Ç–∏—Ç—å –∑–∞–¥–∞—á—É –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é"""
```

---

## üì¶ –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### PersonalTask

**–§–∞–π–ª:** `task_tracker_bot/models/personal_task.py`

```python
@dataclass
class PersonalTask:
    id: int
    user_id: int
    title: str
    description: Optional[str]
    scheduled_date: date
    scheduled_time: Optional[time]
    scheduled_time_end: Optional[time]
    deadline: Optional[datetime]
    completed: bool
    completed_at: Optional[datetime]
    created_at: datetime
    updated_at: datetime
    
    @property
    def time_display(self) -> str:
        """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏"""
        if self.scheduled_time and self.scheduled_time_end:
            return f"{self.scheduled_time.strftime('%H:%M')} - {self.scheduled_time_end.strftime('%H:%M')}"
        elif self.scheduled_time:
            return self.scheduled_time.strftime('%H:%M')
        return ""
    
    @classmethod
    def from_row(cls, row) -> 'PersonalTask':
        """–°–æ–∑–¥–∞—Ç—å PersonalTask –∏–∑ —Å—Ç—Ä–æ–∫–∏ –ë–î"""
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ Task

**–§–∞–π–ª:** `task_tracker_bot/models/task.py`

–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è:
```python
scheduled_date: Optional[date] = None
scheduled_time: Optional[time] = None
scheduled_time_end: Optional[time] = None
```

---

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI –∞–≥–µ–Ω—Ç–∞–º–∏

1. **OrchestratorAgent:**
   - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å intent `add_todo_batch`
   - –ò–∑–≤–ª–µ–∫–∞—Ç—å –¥–∞—Ç—É –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ ("–Ω–∞ –∑–∞–≤—Ç—Ä–∞", "–Ω–∞ 03.12")
   - –§–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á

2. **TaskManagerAgent:**
   - –ú–µ—Ç–æ–¥ `create_todo_batch` –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `DateParser` –∏ `TaskClassifier`
   - –†–∞–∑–¥–µ–ª—è—Ç—å –∑–∞–¥–∞—á–∏ –Ω–∞ –ª–∏—á–Ω—ã–µ –∏ —Ä–∞–±–æ—á–∏–µ

3. **DataManagerAgent:**
   - –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `personal_tasks`
   - –ú–µ—Ç–æ–¥—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `tasks` —Å `scheduled_date`

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UI

1. **–ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞:** `/todo [–¥–∞—Ç–∞]`
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—É–¥—É-–ª–∏—Å—Ç –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É
   - –ï—Å–ª–∏ –¥–∞—Ç–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ ‚Üí —Å–µ–≥–æ–¥–Ω—è

2. **–ö–Ω–æ–ø–∫–∞ –≤ –º–µ–Ω—é:** "üìÖ –¢—É–¥—É-–ª–∏—Å—Ç"
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ç—É–¥—É-–ª–∏—Å—Ç –Ω–∞ —Å–µ–≥–æ–¥–Ω—è

3. **–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º:**
   - Inline –∫–Ω–æ–ø–∫–∏: "‚óÄÔ∏è –í—á–µ—Ä–∞", "üìÖ –°–µ–≥–æ–¥–Ω—è", "–ó–∞–≤—Ç—Ä–∞ ‚ñ∂Ô∏è"
   - Callback –¥–ª—è –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏

- –ö–æ–º–∞–Ω–¥–∞ `/today` –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ç—É–¥—É-–ª–∏—Å—Ç–∞
- –ö–æ–º–∞–Ω–¥–∞ `/mytasks` –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å –ª–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü–∞–∫–µ—Ç–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ AI

**–ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```
–î–æ–±–∞–≤—å –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –∑–∞–¥–∞—á–∏

1. –í—ã–≥—É–ª –§–µ—Ä—ã –≤ 10:00 –∏ 19:00
2. –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –∫ –±–∞—Ä–±–µ—Ä—É 11:00
3. –î–æ–¥–µ–ª–∞—Ç—å –±–æ—Ç–∞ 11:10 - 12:00
4. 5001 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Å—Ç–æ—Ä–µ
5. 5010 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Å—Ç–æ—Ä–µ
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞:**
1. OrchestratorAgent –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç intent: `add_todo_batch`
2. –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞—Ç—É: "–∑–∞–≤—Ç—Ä–∞" ‚Üí `datetime(2025, 11, 30)`
3. –†–∞–∑–±–∏–≤–∞–µ—Ç –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏
4. –î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏:
   - DateParser –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞—Ç—É/–≤—Ä–µ–º—è
   - TaskClassifier –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- 3 –ª–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤ `personal_tasks`
- 2 —Ä–∞–±–æ—á–∏–µ –∑–∞–¥–∞—á–∏ –≤ `tasks` —Å `project_id`

### –ü—Ä–∏–º–µ—Ä 2: –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç—É–¥—É-–ª–∏—Å—Ç–∞

**–ö–æ–º–∞–Ω–¥–∞:** `/todo 30.11.2025`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üìÖ –¢—É–¥—É-–ª–∏—Å—Ç –Ω–∞ 30.11.2025

‚è∞ 10:00
  ‚òê –í—ã–≥—É–ª –§–µ—Ä—ã

‚è∞ 11:00
  ‚òê –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –∫ –±–∞—Ä–±–µ—Ä—É

‚è∞ 11:10 - 12:00
  ‚òê –î–æ–¥–µ–ª–∞—Ç—å –±–æ—Ç–∞

üìä –†–∞–±–æ—á–∏–µ –∑–∞–¥–∞—á–∏:
  ‚òê 5001 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Å—Ç–æ—Ä–µ
  ‚òê 5010 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Å—Ç–æ—Ä–µ
```

### –ü—Ä–∏–º–µ—Ä 3: –ó–∞–¥–∞—á–∞ —Å –¥–∞—Ç–æ–π –≤ –±—É–¥—É—â–µ–º

**–ó–∞–ø—Ä–æ—Å:**
```
–î–æ–±–∞–≤—å –∑–∞–¥–∞—á—É: 5007 - –ü—Ä–æ–º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫—É 03.12
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞:**
- DateParser –∏–∑–≤–ª–µ–∫–∞–µ—Ç "03.12" ‚Üí `datetime(2025, 12, 3)`
- TaskClassifier –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç project_id: "5007"
- –°–æ–∑–¥–∞–µ—Ç—Å—è —Ä–∞–±–æ—á–∞—è –∑–∞–¥–∞—á–∞ –Ω–∞ 03.12

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [–ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î](../architecture/migrations/002_todo_list_migration.md)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–∞—Ä—Å–∏–Ω–≥—É –¥–∞—Ç](../development/date-parsing-guide.md)
- [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤](../development/agent-instructions-todo.md)
- [–¢–µ—Å—Ç-–ø–ª–∞–Ω](../testing/todo-list-test-plan.md)
- [–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](../architecture/database-schema.md)

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- [ ] –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å DateParser
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å TaskClassifier
- [ ] –°–æ–∑–¥–∞—Ç—å PersonalTask –º–æ–¥–µ–ª—å –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å TodoService
- [ ] –û–±–Ω–æ–≤–∏—Ç—å Task –º–æ–¥–µ–ª—å
- [ ] –û–±–Ω–æ–≤–∏—Ç—å TaskRepository
- [ ] –û–±–Ω–æ–≤–∏—Ç—å AI –∞–≥–µ–Ω—Ç—ã
- [ ] –°–æ–∑–¥–∞—Ç—å handlers –¥–ª—è —Ç—É–¥—É-–ª–∏—Å—Ç–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-01-29

