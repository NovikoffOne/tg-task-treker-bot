# Промпты для агента Cursor

## Главный промпт для начала работы

```
Создай Telegram Task Tracker Bot на Python согласно документации в проекте.

Требования:
1. Используй python-telegram-bot 20.7+
2. База данных: SQLite
3. Структура проекта должна соответствовать TECHNICAL_SPECIFICATION.md
4. Функционал должен полностью соответствовать PROJECT_SPECIFICATION.md
5. Следуй правилам из RULES.md
6. Используй шаблоны из папки templates/ как основу

Начни с создания базовой структуры проекта, затем реализуй модули по порядку из IMPLEMENTATION_PLAN.md.

Все должно быть готово к запуску после настройки .env файла с токеном бота.
```

## Промпты для конкретных задач

### Создание структуры проекта
```
Создай структуру проекта согласно TECHNICAL_SPECIFICATION.md:
- Создай папки: handlers/, utils/, data/
- Создай файлы: bot.py, config.py, database.py, models.py
- Создай __init__.py файлы в папках
- Используй шаблоны из templates/ как основу
```

### Реализация базы данных
```
Реализуй модуль database.py согласно TECHNICAL_SPECIFICATION.md.

Требования:
- Используй SQLite
- Создай класс Database с методами для работы с задачами
- Реализуй методы: create_task, get_task, get_user_tasks, update_task_status, update_task, delete_task
- Используй context manager для соединений
- Создай индексы для оптимизации
- Используй параметризованные запросы для безопасности
```

### Реализация обработчиков задач
```
Реализуй handlers/tasks.py с обработчиками команд для работы с задачами.

Требования:
- Реализуй ConversationHandler для создания задачи
- Реализуй команды: /tasks, /active, /done
- Реализуй команды: /edit, /delete, /done_task
- Используй валидацию из utils/validators.py
- Используй форматирование из utils/formatters.py
- Обрабатывай все ошибки
```

### Реализация inline-кнопок
```
Реализуй handlers/callbacks.py для обработки inline-кнопок.

Требования:
- Обработай callback_data формата: done_<id>, edit_<id>, delete_<id>
- Реализуй пагинацию через callback_data: page_<number>
- Используй клавиатуры из utils/keyboards.py
- Обрабатывай подтверждение удаления
```

### Реализация утилит
```
Реализуй утилиты в папке utils/:
- keyboards.py: создание клавиатур (main_menu, task_actions, pagination)
- formatters.py: форматирование задач и списков
- validators.py: валидация названий, описаний, ID

Следуй примерам из TECHNICAL_SPECIFICATION.md.
```

### Тестирование функционала
```
Протестируй все функции бота:

1. Создание задачи через /newtask
2. Просмотр задач через /tasks, /active, /done
3. Изменение статуса через кнопку и команду
4. Редактирование задачи
5. Удаление задачи с подтверждением
6. Пагинация списков
7. Валидация данных (короткие названия, несуществующие ID)
8. Обработка ошибок

Убедись, что все работает корректно.
```

## Промпты для исправления ошибок

### Если бот не запускается
```
Проверь:
1. Токен бота в .env файле правильный
2. Все зависимости установлены (pip install -r requirements.txt)
3. База данных инициализирована (database.init_db() вызывается)
4. Нет синтаксических ошибок в коде
5. Все импорты корректны

Исправь найденные проблемы.
```

### Если команды не работают
```
Проверь:
1. Handlers правильно зарегистрированы в bot.py
2. ConversationHandler правильно настроен
3. CallbackQueryHandler зарегистрирован
4. Состояния ConversationHandler правильно обрабатываются
5. Нет конфликтов между handlers

Исправь найденные проблемы.
```

### Если база данных не работает
```
Проверь:
1. Путь к БД правильный и есть права на запись
2. Таблицы созданы (init_db() выполнен)
3. SQL запросы синтаксически правильные
4. Используются параметризованные запросы
5. Обработка ошибок БД реализована

Исправь найденные проблемы.
```

## Промпты для улучшения кода

### Рефакторинг
```
Проверь код на:
1. Дублирование кода - вынеси в функции
2. Длинные функции - разбей на меньшие
3. Магические числа - вынеси в константы
4. Неиспользуемый код - удали
5. Комментарии - добавь где нужно

Проведи рефакторинг для улучшения качества кода.
```

### Оптимизация
```
Оптимизируй код:
1. Проверь запросы к БД - используй индексы
2. Оптимизируй пагинацию - не загружай все данные
3. Проверь форматирование - не создавай лишние строки
4. Оптимизируй клавиатуры - кэшируй если нужно

Проведи оптимизацию производительности.
```

## Промпты для документации

### Обновление README
```
Обнови README.md:
1. Добавь информацию о новых функциях
2. Обнови примеры использования
3. Добавь информацию о настройке
4. Обнови список команд

Сделай README актуальным и полезным.
```

### Добавление комментариев
```
Добавь комментарии к коду:
1. Docstrings для всех функций
2. Комментарии к сложной логике
3. Комментарии к важным решениям
4. Type hints где нужно

Улучши читаемость кода через комментарии.
```

## Промпты для интеграции AI-агента (будущее)

```
Подготовь код к интеграции AI-агента:
1. Создай модуль ai/ для AI функционала
2. Добавь интерфейс для AI команд
3. Расширь database.py для AI функций
4. Добавь handlers для AI команд
5. Обнови документацию

Сделай код готовым к добавлению AI функционала.
```

