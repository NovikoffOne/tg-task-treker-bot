# Руководство по тестированию MVP 0.2

> **Дата создания:** 2025-01-28  
> **Версия:** 0.2

## Подготовка к тестированию

### 1. Проверка окружения

Перед началом тестирования убедитесь, что:

- [ ] Бот запущен и работает
- [ ] Файл `task_tracker_bot/.env` создан с `BOT_TOKEN` (файл находится в папке `task_tracker_bot/`, а не в корне проекта)
- [ ] База данных инициализирована
- [ ] Все зависимости установлены

**Примечание:** Файл `.env` должен находиться в папке `task_tracker_bot/`, так как `load_dotenv()` вызывается из `bot.py`, который находится в этой папке.

### 2. Подготовка тестовых данных

Для полного тестирования функционала MVP 0.2 необходимо создать следующую структуру:

#### Пространство
- Пространство: "Работа" (или любое другое)

#### Доски с колонками

**Доска "Подготовка":**
- Очередь
- В работе
- Готово

**Доска "Дизайн":**
- Очередь
- План на неделю
- В работе
- На утверждении
- Готово

**Доска "Разработка":**
- Очередь
- План на неделю
- В работе
- Тестирование
- Фикс Багов
- Готово
- Отправленно AppConnect

**Доска "Тестирование":**
- Очередь
- План на неделю
- В работе
- Модерация
- Реджект
- Готово

**Доска "Store":**
- Очередь
- В работе
- На модерации
- Реджект
- Опубликовано

**Доска "АСО":**
- Очередь
- В работе
- Готово

**Доска "Подготовка аккаунта":**
- Очередь
- План на неделю
- В работе
- Готово

## Последовательность тестирования

### Этап 1: Базовое тестирование

1. **Проверка команд:**
   - `/start` - должно появиться приветственное сообщение
   - `/help` - должна появиться справка
   - `/menu` - должно появиться главное меню

2. **Создание структуры:**
   - Создать пространство: `/newworkspace Работа`
   - Создать все доски (см. список выше)
   - Добавить колонки к доскам через `/addcolumn <доска> <колонка>`

### Этап 2: Создание проекта и настройка зависимостей

1. **Создание проекта:**
   ```
   /newproject 5001 Pictory Ai
   ```
   - Проверить, что задачи созданы на всех досках

2. **Настройка зависимостей:**

   Зависимость 1: Подготовка → Дизайн
   ```
   /newdependency "Подготовка->Дизайн" Подготовка Готово Дизайн Очередь create_task "{project_id} {project_name} Дизайн"
   ```

   Зависимость 2: Дизайн → Разработка
   ```
   /newdependency "Дизайн->Разработка" Дизайн Готово Разработка Очередь create_task "{project_id} {project_name} Разработка"
   ```

   Зависимость 3: Разработка → Тестирование
   ```
   /newdependency "Разработка->Тестирование" Разработка Тестирование Тестирование Очередь create_task "{project_id} {project_name} Тестирование"
   ```

   Зависимость 4: Разработка → Подготовка аккаунта
   ```
   /newdependency "Разработка->Подготовка аккаунта" Разработка Тестирование "Подготовка аккаунта" Очередь create_task "{project_id} {project_name} Подготовить аккаунт"
   ```

   Зависимость 5: Тестирование → Разработка (Реджект → Фикс Багов)
   ```
   /newdependency "Тестирование->Разработка Фикс" Тестирование Реджект Разработка "Фикс Багов" move_task
   ```

   Зависимость 6: Разработка → Тестирование (Фикс Багов → Очередь)
   ```
   /newdependency "Разработка->Тестирование Очередь" Разработка Тестирование Тестирование Очередь move_task
   ```

### Этап 3: Тестирование зависимостей

1. **Перемещение задачи Подготовки в "Готово":**
   - Найти задачу проекта на доске "Подготовка"
   - Переместить: `/movetask <task_id> Готово`
   - Проверить доску "Дизайн" - должна появиться новая задача

2. **Перемещение задачи Дизайна в "Готово":**
   - Переместить задачу Дизайна: `/movetask <task_id> Готово`
   - Проверить доску "Разработка" - должна появиться новая задача

3. **Перемещение задачи Разработки в "Тестирование":**
   - Переместить задачу Разработки: `/movetask <task_id> Тестирование`
   - Проверить доски "Тестирование" и "Подготовка аккаунта" - должны появиться новые задачи

4. **Тестирование реджекта:**
   - Переместить задачу Тестирования из "Модерация" в "Реджект"
   - Проверить доску "Разработка" - задача должна переместиться в "Фикс Багов"

5. **Возврат из реджекта:**
   - Переместить задачу Разработки из "Фикс Багов" в "Тестирование"
   - Проверить доску "Тестирование" - задача должна переместиться из "Реджект" в "Очередь"

### Этап 4: Тестирование просмотра задачи на доске

1. **Открытие доски:**
   ```
   /board Дизайн
   ```
   - Проверить отображение задач в Kanban-виде

2. **Просмотр задачи:**
   - Использовать команду `/task <id>` для просмотра задачи
   - Проверить отображение всех полей, меток, приоритетов

3. **Навигация:**
   - Проверить возможность вернуться к доске из просмотра задачи

### Этап 5: Тестирование автоматического назначения

1. **Перемещение задачи в "В работе":**
   - Переместить задачу проекта в колонку "В работе"
   - Проверить автоматическое назначение через `/task <id>`

2. **Проверка участников проекта:**
   - Проверить, что пользователь добавлен как участник проекта
   - Проверить определение роли на основе доски

3. **Проверка команды "Мои задачи":**
   ```
   /mytasks
   ```
   - Должны отображаться все задачи, где пользователь назначен ответственным

### Этап 6: Тестирование дедлайнов

1. **Установка дедлайна:**
   ```
   /deadline <task_id> 31.12.2025 18:00
   ```
   - Проверить отображение дедлайна в задаче

2. **Проверка команды "Сегодня":**
   ```
   /today
   ```
   - Установить дедлайн на сегодня для задачи
   - Проверить отображение задачи в списке `/today`

### Этап 7: Тестирование автоматического треканья дат

1. **Перемещение в "В работе":**
   - Переместить задачу в "В работе"
   - Проверить установку `started_at` через `/task <id>`

2. **Перемещение в "Готово":**
   - Переместить задачу в "Готово"
   - Проверить установку `completed_at` через `/task <id>`

3. **Повторное перемещение:**
   - Переместить задачу обратно в "В работе"
   - Проверить, что даты не перезаписываются

### Этап 8: Тестирование отображения доски в виде списка

1. **Команда boardlist:**
   ```
   /boardlist Дизайн
   ```
   - Проверить отображение доски в виде списка задач по колонкам

### Этап 9: Добавление метки И1 при публикации

1. **Перемещение в "Опубликовано":**
   - Переместить задачу Store в "Опубликовано"

2. **Добавление метки:**
   ```
   /newtag И1
   /addtag <task_id> И1
   ```
   - Проверить отображение метки в задаче

### Этап 10: Добавление данных для аккаунта

1. **Создание полей:**
   ```
   /newfield "ID аккаунта" text
   /newfield APHUD text
   /newfield "Link Store" url
   /newfield "Link PP" url
   /newfield "Link TOU" url
   ```

2. **Добавление значений:**
   ```
   /addfield <task_id> "ID аккаунта" <значение>
   /addfield <task_id> APHUD <значение>
   /addfield <task_id> "Link Store" <url>
   /addfield <task_id> "Link PP" <url>
   /addfield <task_id> "Link TOU" <url>
   ```

3. **Проверка синхронизации:**
   - Если задача связана с проектом, проверить синхронизацию полей с другими задачами проекта

## Чеклист тестирования

### Функционал зависимостей досок
- [ ] Создание зависимостей работает
- [ ] Автоматическое создание задач при перемещении работает
- [ ] Автоматическое перемещение задач работает
- [ ] Сложный сценарий с несколькими зависимостями работает корректно

### Просмотр задачи на доске
- [ ] Доска отображается в Kanban-виде
- [ ] Можно просмотреть задачу через `/task <id>`
- [ ] Отображается полная информация о задаче
- [ ] Навигация назад к доске работает

### Автоматическое назначение участников
- [ ] Автоматическое назначение при перемещении в "В работе" работает
- [ ] Определение роли на основе доски работает
- [ ] Добавление в участники проекта работает
- [ ] Команда `/mytasks` отображает задачи пользователя

### Дедлайны
- [ ] Установка дедлайна работает
- [ ] Команда `/today` отображает задачи с дедлайном на сегодня
- [ ] Дедлайн отображается в задаче

### Автоматическое треканье дат
- [ ] `started_at` устанавливается при перемещении в "В работе"
- [ ] `completed_at` устанавливается при перемещении в "Готово"
- [ ] Даты не перезаписываются при повторных перемещениях

### Отображение доски в виде списка
- [ ] Команда `/boardlist` работает
- [ ] Доска отображается в виде списка задач по колонкам

## Известные проблемы

При обнаружении проблем во время тестирования:

1. Зафиксировать проблему с описанием шагов воспроизведения
2. Указать ожидаемое и фактическое поведение
3. Создать отчет в файле `docs/testing/test-results/mvp-0.2-manual-test-results.md`

## Дополнительные ресурсы

- [Тест-кейсы для ручного тестирования](manual-test-cases.md)
- [Базовый сценарий тестирования](test-base-case.md)
- [Спецификация MVP 0.2](../../specifications/mvp-0.2.md)

