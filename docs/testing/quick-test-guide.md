# Быстрое тестирование через Telegram MCP

> **Дата создания:** 2025-01-28  
> **Обновлено:** 2025-01-28  
> **Статус:** Актуально

## Что нужно

1. ✅ **Запущенный бот** - бот должен быть запущен (`python task_tracker_bot/bot.py`)
2. ✅ **Username бота** - узнайте у @BotFather (например, `my_task_tracker_bot`)
3. ✅ **Telegram MCP** - должен быть настроен в Cursor AI

## Быстрый тест через Cursor AI

Просто попросите Cursor AI выполнить команду:

```
Найди чат с ботом my_task_tracker_bot и отправь ему команду /start. Покажи ответ бота.
```

Или для комплексного теста:

```
Протестируй бота my_task_tracker_bot через Telegram MCP:
1. Отправь /start и проверь ответ
2. Отправь /help и проверь ответ
3. Отправь /workspaces и проверь ответ
Покажи результаты каждого шага.
```

## Базовый тест через команду бота

Отправьте боту одно из следующих сообщений:

1. **Команда:** `/start_test_basecase`
2. **Тег в сообщении:** `@start_test_basecase` (в любом тексте)
3. **Текст:** `start_test_basecase` (в любом тексте)

### Что делает базовый тест

Тест автоматически:

1. ✅ Создает тестовое пространство (если его нет)
2. ✅ Создает все необходимые доски с колонками:
   - Подготовка
   - Дизайн
   - Разработка
   - Тестирование
   - Store
   - АСО
   - Подготовка аккаунта
3. ✅ Создает проект 5001 "Pictory Ai"
4. ✅ Проходит полный цикл работы с задачами:
   - Перемещает задачи по колонкам
   - Добавляет ссылки (ТЗ, Figma, GitHub, Баг-репорт)
   - Проверяет синхронизацию ссылок между задачами проекта
   - Добавляет метку "И1" к задаче Store
5. ✅ Проверяет все этапы и выводит отчет

### Время выполнения

Тест выполняется автоматически и занимает несколько секунд.

### Результат

После завершения теста вы получите отчет с результатами:
- ✅ Количество пройденных шагов
- ❌ Количество проваленных шагов (если есть)
- Детальная информация о каждом шаге

## Ручное тестирование через MCP функции

### Шаг 1: Найдите бота

Используйте функцию `mcp_telegram-mcp_get_direct_chat_by_contact`:

```
Найди чат с ботом my_task_tracker_bot через Telegram MCP
```

### Шаг 2: Отправьте команду

```
Отправь команду /start боту my_task_tracker_bot через Telegram MCP
```

### Шаг 3: Получите ответ

```
Получи последние сообщения от бота my_task_tracker_bot через Telegram MCP
```

## Примеры команд для тестирования

### Базовые команды
- `/start` - приветствие и меню
- `/help` - справка
- `/menu` - главное меню

### Пространства
- `/workspaces` - список пространств
- `/newworkspace Тест` - создать пространство
- `/delworkspace Тест` - удалить пространство

### Доски
- `/boards` - список досок
- `/newboard Тестовая доска` - создать доску
- `/board Тестовая доска` - показать доску

### Проекты
- `/projects` - список проектов
- `/newproject 1001 Тестовый проект` - создать проект
- `/project 1001` - показать проект

### Задачи
- `/newtask` - создать задачу (интерактивно)
- `/task 1` - показать задачу

### Статистика
- `/stats` - общая статистика

## Проверка результатов

После каждой команды проверьте:

1. ✅ Бот ответил? (есть ответ)
2. ✅ Правильный ответ? (содержит ожидаемую информацию)
3. ✅ Нет ошибок? (нет сообщений об ошибках)
4. ✅ Корректный формат? (правильно отформатирован)

## Отладка

### Бот не отвечает
- Проверьте, что бот запущен: `ps aux | grep bot.py`
- Проверьте логи: `tail -f bot.log`
- Проверьте токен в `.env`

### Чат не найден
- Отправьте `/start` боту вручную хотя бы раз
- Проверьте правильность username бота
- Используйте `mcp_telegram-mcp_search_contacts` для поиска

## Полный пример теста

```
Найди чат с ботом my_task_tracker_bot, отправь ему /start, подожди 2 секунды, 
получи ответ и покажи его. Проверь, что в ответе есть слова "привет" или "меню".
```

## Примечания

- Тест использует реальную базу данных бота
- Если структура уже создана, тест пропустит создание и продолжит работу
- Все изменения сохраняются в базе данных
- Тест можно запускать многократно - он идемпотентен

## Подробная документация

- [test-base-case.md](test-base-case.md) - полное описание всех шагов базового теста
- [mcp-testing.md](mcp-testing.md) - полное руководство по MCP тестированию
- [mcp-testing-examples.md](mcp-testing-examples.md) - примеры использования

